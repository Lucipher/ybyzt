+function(a){var b=function(d,c){this.opt=a.extend(b.DEFAULTS,c);this.$wrap=a(d);this.$ctrl=this.$wrap.find(this.opt.ctrl);this.$prev=this.$wrap.find(this.opt.prev);this.$next=this.$wrap.find(this.opt.next);this.$items=this.$wrap.find(this.opt.items);this.$dotItems=this.$wrap.find(this.opt.dotItems);this.i=this.opt.i;this.len=this.$items.length;this.speed=this.opt.speed;this.rSpeed=this.opt.roundSpeed;this.isAuto=this.opt.isAuto;this.moveW=this.opt.moveWidth;this.manualTimer=null;this.autoRoundTimer=null;this.canSlide=true;this.nextI=0;this.preI=0;this.init(this.i)};b.DEFAULTS={ctrl:".slide_screen .i-ctrl",prev:".slide_screen .i-ctrl .ctrl-prev",next:".slide_screen .i-ctrl .ctrl-next",items:".slide_screen  .li1 .piece",dotItems:".slide_screen .libtn li",i:0,isRandom:false,speed:500,roundSpeed:4000,isAuto:true,moveWidth:990};b.prototype={init:function(c){var d=this;var e=d.$items.eq(c);if(d.$wrap.attr("id").toLowerCase()=="banner_super_slide".toLowerCase()){d.fillBgCol=true;d.showBgCol(e)}e.show();d.$dotItems.eq(c).addClass("selected");d.addEvent();if(d.isAuto){d.autoSlide()}d.$prev.find(".percent").html((d.i+1)+"/"+d.len);d.$next.find(".percent").html((d.i+1)+"/"+d.len)},addEvent:function(){var c=this;c.$dotItems.hover(function(){var f=a(this),d=f.index(),e=c.moveW*d;c.manualTimer=setTimeout(function(){if(d==c.i){return}c.$dotItems.removeClass("selected");c.$dotItems.eq(d).addClass("selected");if(d>c.i){c.$items.eq(d).css("left",c.moveW).show().animate({left:0},c.speed);c.$items.eq(c.i).animate({left:-c.moveW},c.speed)}else{c.$items.eq(d).css("left",-c.moveW).show().animate({left:0},c.speed);c.$items.eq(c.i).animate({left:c.moveW},c.speed)}c.i=d;if(!!c.fillBgCol){c.showBgCol(c.$items.eq(c.i))}c.lazyImg(c.i)},c.speed)},function(){clearTimeout(c.manualTimer)});c.$wrap.hover(function(d){c.$ctrl.stop(true,true).fadeIn(300);c.clearAllAni()},function(d){c.$ctrl.hide();if(c.autoRoundTimer==null&&c.isAuto){c.autoSlide()}});a(".layout").hover(function(d){c.$ctrl.stop(true,true).fadeIn(300);c.clearAllAni()},function(d){c.$ctrl.hide();if(c.autoRoundTimer==null&&c.isAuto){c.autoSlide()}});c.$next.bind("click",function(){if(c.canSlide){c._next()}});c.$prev.bind("click",function(){if(c.canSlide){c._prev()}});c.$ctrl.bind("mouseenter",function(){c.$ctrl.find(".percent").show()});c.$ctrl.bind("mouseleave",function(){c.$ctrl.find(".percent").hide()})},_next:function(){var c=this;c.i=c.i==(c.len-1)?0:(c.i+1);c.nextI=c.i;c.canSlide=false;if(!!c.fillBgCol){c.showBgCol(c.$items.eq(c.nextI))}c.$items.eq(c.nextI).css("left",c.moveW).show().animate({left:0},c.speed,function(){c.canSlide=true});c.$items.eq(c.i-1).animate({left:-c.moveW},c.speed);c.$dotItems.removeClass("selected");c.$dotItems.eq(c.nextI).addClass("selected");c.$next.find(".percent").html((c.nextI+1)+"/"+c.len);c.$prev.find(".percent").html((c.nextI+1)+"/"+c.len);c.lazyImg(c.nextI)},_prev:function(){var c=this;c.preI=(c.i==0)?(c.len-1):(c.i-1);c.canSlide=false;if(!!c.fillBgCol){c.showBgCol(c.$items.eq(c.preI))}c.$items.eq(c.preI).css("left",-c.moveW).show().animate({left:0},c.speed,function(){c.canSlide=true});c.$items.eq(c.i).animate({left:c.moveW},c.speed);c.$dotItems.removeClass("selected");c.$dotItems.eq(c.preI).addClass("selected");c.i=c.i==0?(c.len-1):(c.i-1);c.$prev.find(".percent").html((c.i+1)+"/"+c.len);c.$next.find(".percent").html((c.i+1)+"/"+c.len);c.lazyImg(c.preI)},autoSlide:function(){var c=this;c.autoRoundTimer=setInterval(function(){c._next()},c.rSpeed)},clearAllAni:function(){var c=this;clearTimeout(c.manualTimer);clearInterval(c.autoRoundTimer);c.manualTimer=null;c.autoRoundTimer=null},showBgCol:function(d){var c=d.find("a").data("bg-col");if(c){a(".layout").css({backgroundColor:c})}else{a(".layout").css({backgroundColor:""})}},lazyImg:function(c){var d=this;d.$items.eq(c).find("img[data-src3]").each(function(){var e=a(this);e.attr("src",e.attr("data-src3")).removeAttr("data-src3").addClass("err-product")});d.$items.eq(c).find("img[data-src2]").each(function(){var e=a(this);e.attr("src",e.attr("data-src2")).removeAttr("data-src2").addClass("err-product")});d.$items.eq(c).find("span[data-src2]").each(function(){var e=a(this);RedBaby.initPriceOne(e)});d.$items.eq(c).find("span[data-src3]").each(function(){var e=a(this);RedBaby.initPriceOne(e)})}};a.fn.mSlide=function(c){return this.each(function(){var d=a(this);new b(this,c)})}}(window.jQuery);